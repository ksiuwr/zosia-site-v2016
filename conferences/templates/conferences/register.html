{% extends "base.html" %}
{% load i18n %}
{% load materializecss %}

{% block content %}
<div class="container">
  <h3>
    {% if object %}
      {% trans "Update preferences" %}
    {% else %}
      {% trans "Register" %}
    {% endif %}
  </h3>
  <form method="post">
    {% csrf_token %}
    {{ form | materializecss }}
    <div class="row">
      <div class="col m6 s6 offset-s3 offset-m4">
        <div class="row">
            <input type="submit" value="{% trans 'Confirm' %}" class="waves-effect waves-light btn"/>
        </div>
      </div>
    </div>
  </form>
</div>
{% endblock content %}

{% block custom_scripts %}
<script type="text/javascript">
  $(document).ready(function() {
    $('select').material_select();
    $('textarea').addClass("materialize-textarea");

    {% for field_groups in field_dependencies %}
      {%  for field in field_groups|slice:"1:" %}
      $('#id_{{ field }}').attr('disabled', true);
      {% endfor %}

      $('#id_{{ field_groups|first }}').change(function(event) {
        {%  for field in field_groups|slice:"1:" %}
        $('#id_{{ field }}').attr('disabled', !event.currentTarget.checked);
        if(!event.currentTarget.checked) {
          $('#id_{{ field }}').prop('checked', false);
        }
        {% endfor %}
      });
    {% endfor %}
  });
</script>
{% endblock custom_scripts %}
